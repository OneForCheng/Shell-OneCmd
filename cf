#!/usr/bin/env bash

cf(){

    showUsage(){
        echo "usage: cf [directory]"
        echo
        echo "       /?        Show usage."
        

        return 0;
    }

    changeDirectoryByPartialMatching(){
        local folders
        folders=("$1"/ "$1"*/ *"$1"/ *"$1"*/)

        for folder in "${folders[@]}"; do
            [[ -d "$folder" ]] && cd "$folder" && return 0;
        done

        return 1;
    }

    main(){
        [[ "$*" == *"/?"* ]] && showUsage && return 0;
        [[ $# -gt 1 ]] && showUsage && return 1;

        [[ $# -eq 0 ]] && cd "$OLDPWD" && return 0;

        changeDirectoryByPartialMatching "$1"

        return 0;
    }

    main "$@"
}

cf "$@"
